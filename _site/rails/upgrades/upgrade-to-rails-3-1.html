<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Article">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    

    <title>Upgrade Rails From 3.0 to 3.1 - The Lean Software Boutique</title>


    
    
    <meta name="description" content="This is the second article of our Upgrade Rails series. We will be covering the most important aspects that you need to know to update your Ruby on..." />
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Schema.org markup for Google+ -->
    <meta itemprop="name" content="Upgrade Rails From 3.0 to 3.1 - The Lean Software Boutique">
    <meta itemprop="description" content="This is the second article of our Upgrade Rails series. We will be covering the most important aspects that you need to know to update your Ruby on...">
    <!-- meta itemprop="image" content="http://www.example.com/image.jpg" -->

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@OmbuLabs">

    <meta name="twitter:title" content="Upgrade Rails From 3.0 to 3.1 - The Lean Software Boutique">
    <meta name="twitter:description" content="This is the second article of our Upgrade Rails series. We will be covering the most important aspects that you need to know to update your Ruby on...">
    <meta name="twitter:creator" content="@OmbuLabs">
    <!-- Twitter summary card with large image must be at least 280x150px -->
    <!-- meta name="twitter:image:src" content="http://www.example.com/image.html" -->

    <!-- Open Graph data -->
    <meta property="og:title" content="Upgrade Rails From 3.0 to 3.1 - The Lean Software Boutique" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://www.ombulabs.com/rails/upgrades/upgrade-to-rails-3-1.html" />
    <meta property="og:image" content="https://www.ombulabs.com/assets/isotype.png" />
    <meta property="og:description" content="This is the second article of our Upgrade Rails series. We will be covering the most important aspects that you need to know to update your Ruby on Rails application from version 3.0 to 3.1. If you are in an older version, you can take a look at our previous..." />
    <meta property="og:site_name" content="Upgrade Rails from 3.0 to 3.1 by @lubc32" />
    
      <meta property="article:published_time" content="2017-10-16 09:30:00 +0000" />
      <meta property="article:modified_time" content="2017-10-16 09:30:00 +0000" />
      <meta property="article:section" content="This is the second article of our Upgrade Rails series. We will be covering the most important aspects that you need to know to update your Ruby on Rails application from version 3.0 to 3.1. If you are in an older version, you can take a look at our previous..." />
      <meta property="article:tag" content="Upgrade Rails From 3.0 to 3.1 - The Lean Software Boutique" />
    

    <meta property="fb:admins" content="10153304864537860" />

    <link rel="stylesheet" type="text/css" href="/blog/assets/css/screen.css" />
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,900,300italic,400italic,700italic|Maven+Pro" rel="stylesheet" type="text/css">
    <!-- Customisation  -->
    <link rel="stylesheet" type="text/css" href="/blog/assets/css/main.css" />
    <link rel="stylesheet" type="text/css" href="/assets/ombu_blog/application.css" />
</head>
<body class="home-template">
  <header class="main-header no-cover">
      <nav class="main-nav overlay clearfix">
              
              <a class="back-button icon-arrow-left"
                 href="/blog">Home</a>
          <a class="subscribe-button icon-feed" href="/blog/rss.xml">Subscribe</a>
      </nav>
      <div class="vertical">
          <div class="main-header-content inner">
              <h1 class="page-title logo"><a href="/blog">OmbuLabs Blog</a></h1>
              <h2 class="page-description slogan">
                   The Lean Software Boutique 
                  
              </h2>
          </div>
      </div>
      <a class="scroll-down icon-arrow-left" href="#content" data-offset="-45"><span class="hidden">Scroll Down</span></a>
  </header>
    <div id="wrapper">
      <main class="content post-layout" role="main">

    <article class="post">

        <header class="post-header">
            <h1 class="post-title">Upgrade Rails from 3.0 to 3.1</h1>
            <section class="post-meta">
              
              


  
    <img class="author-thumb" src="//2.gravatar.com/avatar/9219f1f8634fafcbed16e72a0bb5a414?s=50" alt="Luciano Becerra" nopin="nopin" />
  
  <a href="/blog/authors/luciano"
     title="Articles by Luciano Becerra">
     Luciano Becerra
  </a>


 
  on
    
      <a href="/blog/tags/rails"
         title="Articles about Rails">Rails</a>,
      <a href="/blog/tags/upgrades"
         title="Articles about Upgrades">Upgrades</a>



<time class="post-date" datetime="2017-10-16">
  16 Oct 2017
</time>

            </section>
        </header>

        <section class="post-content">
          <p>This is the second article of our <a href="https://www.ombulabs.com/blog/tags/upgrades">Upgrade Rails series</a>. We will be covering the most important aspects that you need to know to update your <a href="http://rubyonrails.org/">Ruby on Rails</a> application from <a href="http://guides.rubyonrails.org/3_0_release_notes.html">version 3.0</a> to <a href="http://guides.rubyonrails.org/3_1_release_notes.html">3.1</a>. If you are in an older version, you can take a look at our <a href="https://www.ombulabs.com/blog/rails/upgrades/upgrade-to-rails-3.html">previous article</a>.</p>

<!--more-->

<ol>
<li><a href="#considerations">Considerations</a></li>
<li><a href="#ruby-version">Ruby version</a></li>
<li><a href="#tools">Tools</a></li>
<li><a href="#config-files">Config files</a></li>
<li><a href="#jquery">jQuery</a></li>
<li><a href="#asset_pipeline">Asset Pipeline</a></li>
<li><a href="#next-steps">Next steps</a></li>
</ol>

<h2 id="considerations">1. Considerations</h2>

<p>Before beginning with the upgrade process, we recommend that each version of your Rails app has the latest <a href="http://semver.org">patch version</a> before moving to the next major/minor version. For example, in order to follow this article, your <a href="https://rubygems.org/gems/rails/versions">Rails version</a> should be at 3.0.20 before updating to Rails 3.1.12</p>

<h2 id="ruby-version">2. Ruby version</h2>

<p>Rails 3.1 requires Ruby <a href="https://www.ruby-lang.org/en/news/2008/05/31/ruby-1-8-7-has-been-released">1.8.7</a> or higher, but no more than <a href="https://www.ruby-lang.org/en/news/2011/10/31/ruby-1-9-3-p0-is-released">1.9.3</a>. If you want to use Ruby 1.9.x, we recommend you skip directly to 1.9.3. Also Ruby <a href="https://www.ruby-lang.org/en/news/2009/01/30/ruby-1-9-1-released">1.9.1</a> is not usable because it has segmentation faults on Rails 3.1. That means that the compatible <a href="https://www.ruby-lang.org/en/downloads/releases/">Ruby versions</a> for Rails 3.1 are 1.8.7, <a href="https://www.ruby-lang.org/en/news/2010/08/18/ruby-1-9-2-released">1.9.2</a>, or 1.9.3. Keep in mind that the next Rails version (3.2) will be the last one that supports Ruby 1.8.7 and 1.9.2.</p>

<h2 id="tools">3. Tools</h2>

<p>Rails 3.1 comes with a generator that helps the upgrade process. You just need to run <code>rake rails:update</code> to see a <a href="https://gist.github.com/ryanb/1101906">guide</a> that details how to upgrade your application.</p>

<p>Sometimes it&#39;s also useful to check which files changed between two specific versions of Rails. Fortunately <a href="http://railsdiff.org/3.0.20/3.1.12">Rails Diff</a> makes that easy.</p>

<h2 id="config-files">4. Config files</h2>

<ul>
<li>You should <strong>remove</strong> any references to <code>ActionView::Base.debug_rjs</code> in your project.</li>
</ul>

<div class="highlight"><pre><code class="language-text" data-lang="text"><span></span># (config/environments/development.rb)

config.action_view.debug_rjs = true
</code></pre></div>

<ul>
<li>If you want to wrap parameters into a nested hash add a <code>config/initializers/wrap_parameters.rb</code> file with the following contents. This file comes by default in new applications.</li>
</ul>

<div class="highlight"><pre><code class="language-text" data-lang="text"><span></span># Be sure to restart your server when you modify this file.
# This file contains settings for ActionController::ParamsWrapper which
# is enabled by default.

# Enable parameter wrapping for JSON. You can disable this by setting :format to an empty array.
ActiveSupport.on_load(:action_controller) do
  wrap_parameters :format =&gt; [:json]
end

# Disable root element in JSON by default.
ActiveSupport.on_load(:active_record) do
  self.include_root_in_json = false
end
</code></pre></div>

<h2 id="jquery">5. jQuery</h2>

<p><a href="https://jquery.com/">jQuery</a> is the default JavaScript library that comes with Rails 3.1.</p>

<p>To add this you need to include the <a href="https://github.com/rails/jquery-rails">jquery-rails</a> gem in your <a href="https://bundler.io/gemfile.html">Gemfile</a></p>

<div class="highlight"><pre><code class="language-text" data-lang="text"><span></span>gem &#39;jquery-rails&#39;
</code></pre></div>

<p>And then include the libraries in your <code>app/assets/javascripts/application.js</code></p>

<div class="highlight"><pre><code class="language-text" data-lang="text"><span></span>//= require jquery
//= require jquery_ujs
</code></pre></div>

<p>So now you can get rid of your jQuery assets like <code>jquery.js</code> or <code>jquery.min.js</code>.</p>

<h2 id="asset_pipeline">6. Asset Pipeline</h2>

<p><a href="http://guides.rubyonrails.org/asset_pipeline.html">Asset Pipeline</a> is an optional feature in Rails 3.1, but we recommend to include it to take advantage of it. In order to do that, you should apply the following changes:</p>

<ul>
<li>Add to your <code>Gemfile</code>:</li>
</ul>

<div class="highlight"><pre><code class="language-text" data-lang="text"><span></span>group :assets do
  gem &#39;sass-rails&#39;,   &quot;~&gt; 3.1.5&quot;
  gem &#39;coffee-rails&#39;, &quot;~&gt; 3.1.1&quot;
  gem &#39;uglifier&#39;,     &quot;&gt;= 1.0.3&quot;
end
</code></pre></div>

<ul>
<li>Update your <code>config/application.rb</code></li>
</ul>

<div class="highlight"><pre><code class="language-text" data-lang="text"><span></span>config.assets.enabled = true
config.assets.version = &#39;1.0&#39;

# Defaults to &#39;/assets&#39;
config.assets.prefix = &#39;/asset-files&#39;
</code></pre></div>

<ul>
<li>Update your <code>config/environments/development.rb</code></li>
</ul>

<div class="highlight"><pre><code class="language-text" data-lang="text"><span></span># Do not compress assets
config.assets.compress = false

# Expands the lines which load the assets
config.assets.debug = true
</code></pre></div>

<ul>
<li>Update your <code>config/environments/production.rb</code></li>
</ul>

<div class="highlight"><pre><code class="language-text" data-lang="text"><span></span># Compress JavaScripts and CSS
config.assets.compress = true

# Don&#39;t fallback to assets pipeline if a precompiled asset is missed
config.assets.compile = false

# Generate digests for assets URLs
config.assets.digest = true

# Defaults to Rails.root.join(&quot;public/assets&quot;)
# config.assets.manifest = YOUR_PATH

# Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
# config.assets.precompile = %w( admin.js admin.css )
</code></pre></div>

<ul>
<li>Update your <code>config/environments/test.rb</code></li>
</ul>

<div class="highlight"><pre><code class="language-text" data-lang="text"><span></span># Configure static asset server for tests with Cache-Control for performance
config.serve_static_assets = true
config.static_cache_control = &quot;public, max-age=3600&quot;
</code></pre></div>

<h2 id="next-steps">7. Next steps</h2>

<p>After you get your application properly running in Rails 3.1, you will probably want to keep working on this Rails upgrade journey. So don&#39;t forget to check our complete <a href="https://www.ombulabs.com/blog/tags/upgrades">Rails upgrade series</a> to make that easy.</p>

        </section>

        

        <footer class="post-footer">
          
            
            <figure class="author-image">
              
                <a class="img" href="" style="background-image: url(//2.gravatar.com/avatar/9219f1f8634fafcbed16e72a0bb5a414?s=50)">
                <span class="hidden">Luciano Becerra's Picture</span></a>
              
            </figure>
            <section class="author">
              <h4> Luciano Becerra </h4>
              <p>
                We are the Lean Software Boutique. Check us out at <a href="https://www.ombulabs.com">www.ombulabs.com</a>
              </p>
            </section>
          

          <!-- Share links section -->
          <section class="share">
    <h4>Share this post</h4>
    <a class="icon-twitter" href="http://twitter.com/share?text=Upgrade Rails from 3.0 to 3.1&amp;url=https://www.ombulabs.com/rails/upgrades/upgrade-to-rails-3-1.html"
        onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.ombulabs.com/rails/upgrades/upgrade-to-rails-3-1.html"
        onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=https://www.ombulabs.com/rails/upgrades/upgrade-to-rails-3-1.html"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>

          <!-- Disqus comments -->
          <section class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">

        var disqus_shortname = 'ombulabs';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


        </footer>

    </article>
    <footer class="site-footer clearfix">
  <section class="copyright">
    <figure>
      <img src="/blog/assets/images/creative-commons.png"
           alt="Creative Commons Attribution-NonCommercial">
      <figcaption>
        <a href="http://creativecommons.org/licenses/by-nc/3.0/"
           target="_blank"
           title="Creative Commons Attribution-NonCommercial">Creative Commons Attribution-NonCommercial</a>
      </figcaption>
    </figure>
  </section>
  <section class="poweredby">Made with love using <a href="https://github.com/jekyll/jekyll" target="_blank">Jekyll</a> and
    <a target="_blank" href="http://github.com/rosario/kasper">Kasper theme</a>
  </section>
</footer>

</main>

      <div id="sidebar">
  <h2 class="category-name">Listing all tags</h2>
    

    
    
        <h3 class="tag-name">
          <a href="/blog/tags/"
             title="Articles about "></a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/Learning"
             title="Articles about Learning">Learning</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/Ruby"
             title="Articles about Ruby">Ruby</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/agile"
             title="Articles about Agile">Agile</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/aws"
             title="Articles about Aws">Aws</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/backbone"
             title="Articles about Backbone">Backbone</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/benchmark"
             title="Articles about Benchmark">Benchmark</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/best-practices"
             title="Articles about Best Practices">Best Practices</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/bugs"
             title="Articles about Bugs">Bugs</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/carrierwave"
             title="Articles about Carrierwave">Carrierwave</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/case-study"
             title="Articles about Case Study">Case Study</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/circle-ci"
             title="Articles about Circle Ci">Circle Ci</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/continuous-integration"
             title="Articles about Continuous Integration">Continuous Integration</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/conventions"
             title="Articles about Conventions">Conventions</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/crowdsourcing"
             title="Articles about Crowdsourcing">Crowdsourcing</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/design"
             title="Articles about Design">Design</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/docker"
             title="Articles about Docker">Docker</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/dry"
             title="Articles about Dry">Dry</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/git"
             title="Articles about Git">Git</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/github"
             title="Articles about Github">Github</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/hubot"
             title="Articles about Hubot">Hubot</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/imap"
             title="Articles about Imap">Imap</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/jobs"
             title="Articles about Jobs">Jobs</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/lean-startup"
             title="Articles about Lean Startup">Lean Startup</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/linux"
             title="Articles about Linux">Linux</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/maintenance"
             title="Articles about Maintenance">Maintenance</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/monit"
             title="Articles about Monit">Monit</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/mvp"
             title="Articles about Mvp">Mvp</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/open-source"
             title="Articles about Open Source">Open Source</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/pair-programming"
             title="Articles about Pair Programming">Pair Programming</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/performance"
             title="Articles about Performance">Performance</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/protractor"
             title="Articles about Protractor">Protractor</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/rails"
             title="Articles about Rails">Rails</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/react"
             title="Articles about React">React</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/rspec"
             title="Articles about Rspec">Rspec</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/ruby"
             title="Articles about Ruby">Ruby</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/rubygems"
             title="Articles about Rubygems">Rubygems</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/s3"
             title="Articles about S3">S3</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/security"
             title="Articles about Security">Security</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/sessions"
             title="Articles about Sessions">Sessions</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/slack"
             title="Articles about Slack">Slack</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/software-development"
             title="Articles about Software Development">Software Development</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/software-quality"
             title="Articles about Software Quality">Software Quality</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/team"
             title="Articles about Team">Team</a>
        </h3>
    
        <h3 class="tag-name">
          <a href="/blog/tags/upgrades"
             title="Articles about Upgrades">Upgrades</a>
        </h3>
    
</div>

    </div>

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.1.0/jquery.fitvids.min.js"></script>
    <script type="text/javascript" src="/blog/assets/js/index.js"></script>

    <!-- Google Analytics Tracking code -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-17795190-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
</body>
</html>
